<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SVG to PNG Converter</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 30px;
        }
        .converter-section {
            margin-bottom: 30px;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 8px;
        }
        .converter-section h2 {
            color: #555;
            margin-top: 0;
        }
        .icon-preview {
            display: flex;
            gap: 20px;
            margin: 20px 0;
        }
        .icon-item {
            text-align: center;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
            background: #f9f9f9;
        }
        .icon-item img {
            display: block;
            margin: 0 auto 10px;
            border: 1px solid #ddd;
            background: white;
            padding: 5px;
        }
        button {
            background: #007cba;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            margin: 5px;
        }
        button:hover {
            background: #005a8b;
        }
        .download-links {
            margin-top: 15px;
        }
        .download-links a {
            display: inline-block;
            margin-right: 10px;
            padding: 8px 15px;
            background: #28a745;
            color: white;
            text-decoration: none;
            border-radius: 4px;
            font-size: 12px;
        }
        .download-links a:hover {
            background: #218838;
        }
        .instructions {
            background: #e9ecef;
            padding: 20px;
            border-radius: 8px;
            margin-top: 30px;
        }
        .instructions h3 {
            color: #495057;
            margin-top: 0;
        }
        .instructions ol {
            margin-left: 20px;
        }
        .instructions li {
            margin-bottom: 8px;
        }
        canvas {
            border: 1px solid #ddd;
            background: white;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>🎨 SVG to PNG Converter</h1>
        <p>AnnotateShot Extension의 SVG 아이콘을 PNG로 변환합니다.</p>
        
        <!-- 16x16 아이콘 -->
        <div class="converter-section">
            <h2>16x16 아이콘</h2>
            <div class="icon-preview">
                <div class="icon-item">
                    <div id="svg-16"></div>
                    <p>SVG 원본</p>
                </div>
                <div class="icon-item">
                    <canvas id="canvas-16" width="16" height="16"></canvas>
                    <p>PNG 변환</p>
                    <button onclick="convertSVG(16)">변환하기</button>
                    <div class="download-links">
                        <a id="download-16" href="#" download="icon-16.png" style="display:none;">다운로드</a>
                    </div>
                </div>
            </div>
        </div>

        <!-- 48x48 아이콘 -->
        <div class="converter-section">
            <h2>48x48 아이콘</h2>
            <div class="icon-preview">
                <div class="icon-item">
                    <div id="svg-48"></div>
                    <p>SVG 원본</p>
                </div>
                <div class="icon-item">
                    <canvas id="canvas-48" width="48" height="48"></canvas>
                    <p>PNG 변환</p>
                    <button onclick="convertSVG(48)">변환하기</button>
                    <div class="download-links">
                        <a id="download-48" href="#" download="icon-48.png" style="display:none;">다운로드</a>
                    </div>
                </div>
            </div>
        </div>

        <!-- 128x128 아이콘 -->
        <div class="converter-section">
            <h2>128x128 아이콘</h2>
            <div class="icon-preview">
                <div class="icon-item">
                    <div id="svg-128"></div>
                    <p>SVG 원본</p>
                </div>
                <div class="icon-item">
                    <canvas id="canvas-128" width="128" height="128"></canvas>
                    <p>PNG 변환</p>
                    <button onclick="convertSVG(128)">변환하기</button>
                    <div class="download-links">
                        <a id="download-128" href="#" download="icon-128.png" style="display:none;">다운로드</a>
                    </div>
                </div>
            </div>
        </div>

        <div class="instructions">
            <h3>📋 사용 방법</h3>
            <ol>
                <li>각 크기별로 "변환하기" 버튼을 클릭합니다</li>
                <li>"다운로드" 링크가 나타나면 클릭하여 PNG 파일을 저장합니다</li>
                <li>다운로드된 파일을 extension 폴더에 저장합니다</li>
                <li>manifest.json에서 아이콘 경로를 .png로 변경합니다</li>
                <li>확장 프로그램을 다시 로드하여 테스트합니다</li>
            </ol>
        </div>
    </div>

    <script>
        // SVG 아이콘 데이터
        const svgIcons = {
            16: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16">
                <circle cx="8" cy="8" r="7" fill="#3B82F6"/>
                <rect x="3" y="4" width="10" height="8" rx="1" fill="#FFFFFF"/>
                <circle cx="6" cy="7" r="1.5" fill="#EF4444"/>
                <text x="6" y="8.5" text-anchor="middle" fill="white" font-family="Arial" font-size="2" font-weight="bold">1</text>
                <path d="M9 6 L11 7 L9 8" fill="#8B5CF6"/>
            </svg>`,
            48: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48" width="48" height="48">
                <circle cx="24" cy="24" r="20" fill="#3B82F6" stroke="#1E40AF" stroke-width="2"/>
                <rect x="9" y="12" width="30" height="24" rx="3" fill="#FFFFFF" stroke="#E5E7EB" stroke-width="1"/>
                <polygon points="12,30 18,24 21,27 27,21 36,30" fill="#10B981"/>
                <circle cx="30" cy="18" r="2" fill="#F59E0B"/>
                <circle cx="15" cy="18" r="3" fill="#EF4444"/>
                <text x="15" y="20.5" text-anchor="middle" fill="white" font-family="Arial" font-size="4" font-weight="bold">1</text>
                <path d="M22 15 L28 17 L26 18 L28 19 L22 21 L24 18 Z" fill="#8B5CF6"/>
                <path d="M7 10 L7 7 L10 7" stroke="#3B82F6" stroke-width="2" fill="none"/>
                <path d="M38 7 L41 7 L41 10" stroke="#3B82F6" stroke-width="2" fill="none"/>
                <path d="M41 38 L41 41 L38 41" stroke="#3B82F6" stroke-width="2" fill="none"/>
                <path d="M10 41 L7 41 L7 38" stroke="#3B82F6" stroke-width="2" fill="none"/>
            </svg>`,
            128: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 128 128" width="128" height="128">
                <defs>
                    <linearGradient id="bgGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                        <stop offset="0%" style="stop-color:#3B82F6;stop-opacity:1" />
                        <stop offset="100%" style="stop-color:#1E40AF;stop-opacity:1" />
                    </linearGradient>
                </defs>
                <circle cx="64" cy="64" r="56" fill="url(#bgGradient)"/>
                <rect x="24" y="32" width="80" height="64" rx="8" fill="#FFFFFF" stroke="#E5E7EB" stroke-width="2"/>
                <polygon points="32,80 40,72 48,76 56,68 64,72 72,64 80,68 88,60 96,80" fill="#10B981"/>
                <polygon points="32,80 40,76 48,80 56,72 64,76 72,68 80,72 88,64 96,80" fill="#059669" opacity="0.7"/>
                <circle cx="80" cy="48" r="6" fill="#F59E0B"/>
                <circle cx="80" cy="48" r="3" fill="#FEF3C7"/>
                <circle cx="40" cy="48" r="8" fill="#EF4444"/>
                <circle cx="40" cy="48" r="6" fill="#FCA5A5" opacity="0.5"/>
                <text x="40" y="53" text-anchor="middle" fill="white" font-family="Arial, sans-serif" font-size="10" font-weight="bold">1</text>
                <path d="M60 40 L75 45 L70 48 L75 51 L60 56 L65 48 Z" fill="#8B5CF6"/>
                <path d="M62 42 L73 46 L69 48 L73 50 L62 54 L66 48 Z" fill="#C4B5FD" opacity="0.6"/>
                <line x1="85" y1="65" x2="100" y2="65" stroke="#F97316" stroke-width="2"/>
                <text x="102" y="69" fill="#F97316" font-family="Arial, sans-serif" font-size="8" font-weight="bold">TEXT</text>
                <rect x="50" y="75" width="12" height="8" fill="none" stroke="#06B6D4" stroke-width="2"/>
                <path d="M20 28 L20 20 L28 20" stroke="#3B82F6" stroke-width="3" fill="none" stroke-linecap="round"/>
                <path d="M100 20 L108 20 L108 28" stroke="#3B82F6" stroke-width="3" fill="none" stroke-linecap="round"/>
                <path d="M108 100 L108 108 L100 108" stroke="#3B82F6" stroke-width="3" fill="none" stroke-linecap="round"/>
                <path d="M28 108 L20 108 L20 100" stroke="#3B82F6" stroke-width="3" fill="none" stroke-linecap="round"/>
                <rect x="22" y="30" width="84" height="68" fill="none" stroke="#3B82F6" stroke-width="1" stroke-dasharray="4,2" opacity="0.5"/>
            </svg>`
        };

        // 페이지 로드 시 SVG 표시
        window.onload = function() {
            document.getElementById('svg-16').innerHTML = svgIcons[16];
            document.getElementById('svg-48').innerHTML = svgIcons[48];
            document.getElementById('svg-128').innerHTML = svgIcons[128];
        };

        // SVG를 PNG로 변환
        function convertSVG(size) {
            const canvas = document.getElementById(`canvas-${size}`);
            const ctx = canvas.getContext('2d');
            const svgData = svgIcons[size];
            
            // SVG를 이미지로 변환
            const img = new Image();
            const svgBlob = new Blob([svgData], {type: 'image/svg+xml;charset=utf-8'});
            const url = URL.createObjectURL(svgBlob);
            
            img.onload = function() {
                // 캔버스에 그리기
                ctx.clearRect(0, 0, size, size);
                ctx.drawImage(img, 0, 0, size, size);
                
                // PNG 데이터 URL 생성
                const pngDataUrl = canvas.toDataURL('image/png');
                
                // 다운로드 링크 생성
                const downloadLink = document.getElementById(`download-${size}`);
                downloadLink.href = pngDataUrl;
                downloadLink.style.display = 'inline-block';
                
                // 메모리 정리
                URL.revokeObjectURL(url);
                
                console.log(`${size}x${size} 아이콘 변환 완료`);
            };
            
            img.src = url;
        }
    </script>
</body>
</html>